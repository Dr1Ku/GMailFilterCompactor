javascript: var jQuerySrc=document.createElement("script");jQuerySrc.setAttribute("id","injected-jQuery");jQuerySrc.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js");jQuerySrc.setAttribute("onload","GMailFilterCompactorGo();");var head=document.getElementsByTagName("head")[0];head.appendChild(jQuerySrc);function GMailFilterCompactorGo(){var GMailFilterCompactor={initialize:function(pLabel,pWithDelete){this.SELECTOR_FILTER_IFRAME="iframe#canvas_frame";this.SELECTOR_FILTER="span.qW";this.SIZE_THRESHOLD=512;this.ACTION_MSG="Do this: ";this.mDeleteMatchedFilters=pWithDelete;this.mLabelName=pLabel;this.mLabelAsAction='Apply label "'+this.mLabelName+'"';this.matchersArray=[];this.matcherBuffer="{";this.mCurrentFilter={};},updateCurrentFilter:function(){var me=this;var currentFilter=me.mCurrentFilter;var actionElem=jQuery(currentFilter.element);var actionElemParent=actionElem.parent();var actionStr=actionElemParent.html();currentFilter.matcher=actionElem.html().replace(/<wbr>/gi,"");currentFilter.action=actionStr.substring(actionStr.indexOf(me.ACTION_MSG)+me.ACTION_MSG.length,actionStr.length);currentFilter.checkbox=actionElemParent.prev().children().first();},rewindBuffer:function(){var me=this;me.matcherBuffer=me.matcherBuffer.substring(0,me.matcherBuffer.length-1)+"}";me.matchersArray.push(me.matcherBuffer);me.matcherBuffer="{";},checkCurrentFilterAction:function(){var me=this;var regExp=new RegExp(me.mLabelAsAction,"i");if(me.mCurrentFilter.action.match(regExp)){if(me.matcherBuffer.length>me.SIZE_THRESHOLD){me.rewindBuffer();}me.matcherBuffer+=me.mCurrentFilter.matcher.replace("&lt;","<").replace("&gt;",">")+"|";if(me.mDeleteMatchedFilters){me.mCurrentFilter.checkbox.click();}}},outputResults:function(){var me=this;if(me.matchersArray.length==0){me.rewindBuffer();}var hasFirebug=(window&&window.console);if(!hasFirebug){alert ("Here come the results, don't forget "+"to Select (CTRL+A), Copy (CTRL+C) and Paste (CTRL+V) them "+"within a text editor for instance !");}jQuery.each (me.matchersArray,function(idx,elem){if(window&&window.console){console.log(elem);console.log(" \n");}else {alert(elem);}});if(window&&window.console){alert("Done, check out the Firebug Console !");}else {alert("Those were the results, enjoy !");}},eventuallyDeleteFoundFilters:function(){var me=this;if(me.mDeleteMatchedFilters){me.frameBody.find("button.qR").filter("[innerHTML='Delete']").click();}},go:function(){var me=this;me.frameBody=jQuery(me.SELECTOR_FILTER_IFRAME).contents();var filters=me.frameBody.find(me.SELECTOR_FILTER);jQuery.each (filters,function(idx,elem){me.mCurrentFilter.element=jQuery(elem);me.updateCurrentFilter();me.checkCurrentFilterAction();});me.outputResults();me.eventuallyDeleteFoundFilters();jQuery("done");}};var labelName=prompt ("What is the name of the Label we're looking for ? \n"+"For instance : 'Newsletter' \n\n"+"Press Cancel to abort, no hard feelings.","Newsletter");if((labelName!=null)&&(labelName!="")){var withDelete=confirm ("Would you like to delete the found filters afterwards ?\n"+"You can create new 'compacted' filters using this script's output.\n\n"+"    NOTE: 'Cancel' is 'No, do not delete filters' ");GMailFilterCompactor.initialize(labelName,withDelete);GMailFilterCompactor.go();}}head.removeChild(jQuerySrc);